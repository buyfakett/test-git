name: Doc Build

on:
  push:
    branch:
      - master 
      - main

permissions:
  contents: write

jobs:
  deploy:

    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v3
        with:
          python-version: '3.7'

      - name: Install dependencies
        run: |
          pip install mkdocs-material

      - name: Build and publish
        run: |
            cd ./doc/source 
            mkdocs build
            cd ../../
            mkdir ../doc/
            cp -R ./doc/sourcesite/* ../doc/
            git checkout gh-pages
            cp -R ../doc/* .
            git add .
            git commit -m 'test'
            git push
